<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
        integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <script src="/jquery-3.5.1.min.js"></script>
    <style>
        html {
            font-size: 62.5%;
        }

        li {
            list-style: none;
        }
    </style>
</head>
<script>
    $(document).ready(function () {
        const $url = "https://localhost:44377/api/Festivals";
        $(function () {
            $.ajax({
                url: $url,
                data: {
                    format: 'json'
                },
                error: function () {
                    $('#demo').html('<p class="text-danger">An error has occurred</p>');
                },
                dataType: 'json',
                success: function (data) {
                    // let fech = JSON.parse(data);
                    let $listCategory = $('#listCategory');
                    let $Navname = $("#NameNav");
                    $.each(data, function (i, value) {
                        console.log(value);
                        // Get Categoies:
                        $listCategory.append(`<option value="${value.NameCategory}">${value.NameCategory}</option>`);

                        // get Nav Name
                        $Navname.append(`<option value="${value.NameNav}">${value.NameNav}</option>`);
                    });




                    //Get Data
                    // let $infor = $('.box-infor').html(
                    //     `<img src="https://localhost:44377/Photos/${data[0].img}" class="card-img-top" id="img">
                    // <ul class="card-text">
                    //     <li>${data[0].description}
                    // <li>${data[0].address}
                    // <li>${data[0].timeFirst}
                    // <li>${data[0].timeLast}
                    // <li>${data[0].price}
                    //     </ul>`);

                    // Get title
                    var $name = $('.card-title').text(data[0].name);

                    $(".card-title").append($name);

                },
                type: 'GET'
            });
        })

        // Function Get Data:
        function Add() {
            let $form = {};
            $form.NameCategory = $("#listCategory").val();
            $form.NameNav = $("#NameNav").val();

            $form.address = $("#addFes").val();
            $form.description = $("#desFes").val();
            $form.img = $("#imgFes").val();
            $form.name = $("#NameFes").val();

            $form.price = $("#priceFes").val();
            $form.sale = $("#saleFes").val();
            $form.timeFirst = $("#timeFFes").val();
            $form.timeLast = $("#timeLFes").val();
            $.ajax({
                url: "https://localhost:44377/api/Festivals",
                type: "POST",
                contentType: "Application/json; charset=utf-8",
                data: JSON.stringify($form),
                dataType: "json",
                success: function(response) {
                    alert(response)
                },
                error: function() {
                    console.log($form)
                }
            });
        }
        $('#Add').click(Add());
    })

</script>

<body>
    <form id="postFes" class="form-group">
        <div>
            <label for="getId">Enter your Name Category:</label>
            <select id="listCategory"></select>
        </div>

        <div>
            <label for="Nav">Enter name Nav:</label>
            <select id="NameNav"></select>
        </div>

        <fieldset>
            <legend>Select Information Fes</legend>
            <!-- <label for="idFes">id</label>
            <input type="text" id="idFes"> -->
            <label for="NameFes">Name</label>
            <input type="text" id="NameFes">
            <label for="addFes">Address</label>
            <input type="text" id="addFes">
            <label for="imgFes">image</label>
            <input type="file" id="imgFes">
            <label for="desFes">Description</label>
            <textarea name="" id="desFes" cols="30" rows="10"></textarea>
            <label for="priceFes">Price</label>
            <input type="text" id="priceFes">
            <label for="saleFes">Sale</label>
            <input type="text" id="saleFes">
            <label for="timeFFes">Time First</label>
            <input type="text" id="timeFFes">
            <label for="timeLFes">Time Last</label>
            <input type="text" id="timeLFes">
        </fieldset>

        <input type="submit" value="Add" id="Add" class="btn btn-success">

    </form>

    <!-- <button id="btn" class="btn btn-success">Ok</button> -->
    <div id="demo">
        <div class="card">
            <div class="card-body">
                <h1 class="card-title"></h1>
                <div class="box-infor"></div>

            </div>
        </div>
    </div>
</body>

</html>